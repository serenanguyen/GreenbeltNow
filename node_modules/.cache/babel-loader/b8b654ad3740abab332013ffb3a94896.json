{"ast":null,"code":"import _slicedToArray from \"/Users/serena.nguyen/Sites-1/GreenbeltNow/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"/Users/serena.nguyen/Sites-1/GreenbeltNow/src/components/Dropdown.js\";\nimport React, { useContext, useState } from \"react\";\nimport { locations } from \"../staticData\";\nimport helpers from \"../helpers\";\nimport { ResultsContext, LoadingContext } from \"../Store\";\nexport default (() => {\n  const setIsLoading = useContext(LoadingContext).setState;\n  const setResults = useContext(ResultsContext).setState;\n\n  const _useState = useState(false),\n        _useState2 = _slicedToArray(_useState, 2),\n        isOpen = _useState2[0],\n        setIsOpen = _useState2[1];\n\n  const _useState3 = useState(),\n        _useState4 = _slicedToArray(_useState3, 2),\n        selectedLocation = _useState4[0],\n        setLocation = _useState4[1];\n\n  const renderLocations = () => {\n    const locationKeys = Object.keys(locations);\n    return locationKeys // do not display selected location\n    .filter(location => location !== selectedLocation).map((location, i) => {\n      return React.createElement(\"li\", {\n        key: i,\n        className: \"item\",\n        \"data-id\": location,\n        onClick: handleSelect,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 24\n        },\n        __self: this\n      }, locations[location].name);\n    });\n  };\n\n  const handleSelect = e => {\n    const locationID = e.currentTarget.dataset.id; // run getWaterData if new location is selected\n\n    if (selectedLocation !== locations[locationID]) {\n      setLocation(locationID);\n      setIsLoading(true);\n      helpers.getWaterData(locationID).then(response => {\n        setIsLoading(false);\n        setResults(response);\n      }).catch(error => {\n        setIsLoading(false);\n        setResults({\n          error\n        });\n      });\n    }\n  };\n\n  const toggleDropdown = () => {\n    setIsOpen(!isOpen);\n  };\n\n  let dropdownClass = \"dropdown\";\n\n  if (isOpen) {\n    dropdownClass += \" active\";\n  }\n\n  const title = locations[selectedLocation] && locations[selectedLocation].name || \"Select Location\";\n  return React.createElement(\"div\", {\n    className: dropdownClass,\n    onClick: toggleDropdown,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"title\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, title), React.createElement(\"ul\", {\n    className: \"list\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }, renderLocations()));\n});","map":{"version":3,"sources":["/Users/serena.nguyen/Sites-1/GreenbeltNow/src/components/Dropdown.js"],"names":["React","useContext","useState","locations","helpers","ResultsContext","LoadingContext","setIsLoading","setState","setResults","isOpen","setIsOpen","selectedLocation","setLocation","renderLocations","locationKeys","Object","keys","filter","location","map","i","handleSelect","name","e","locationID","currentTarget","dataset","id","getWaterData","then","response","catch","error","toggleDropdown","dropdownClass","title"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,QAA5B,QAA4C,OAA5C;AAEA,SAAQC,SAAR,QAAwB,eAAxB;AAEA,OAAOC,OAAP,MAAoB,YAApB;AAEA,SAASC,cAAT,EAAyBC,cAAzB,QAA+C,UAA/C;AAEA,gBAAe,MAAM;AACnB,QAAMC,YAAY,GAAGN,UAAU,CAACK,cAAD,CAAV,CAA2BE,QAAhD;AACA,QAAMC,UAAU,GAAGR,UAAU,CAACI,cAAD,CAAV,CAA2BG,QAA9C;;AAFmB,oBAISN,QAAQ,CAAC,KAAD,CAJjB;AAAA;AAAA,QAIZQ,MAJY;AAAA,QAIJC,SAJI;;AAAA,qBAKqBT,QAAQ,EAL7B;AAAA;AAAA,QAKZU,gBALY;AAAA,QAKMC,WALN;;AAOnB,QAAMC,eAAe,GAAG,MAAM;AAC5B,UAAMC,YAAY,GAAGC,MAAM,CAACC,IAAP,CAAYd,SAAZ,CAArB;AAEA,WAAOY,YAAY,CACjB;AADiB,KAEhBG,MAFI,CAEGC,QAAQ,IAAIA,QAAQ,KAAKP,gBAF5B,EAGJQ,GAHI,CAGA,CAACD,QAAD,EAAWE,CAAX,KAAiB;AACpB,aACE;AACE,QAAA,GAAG,EAAEA,CADP;AAEE,QAAA,SAAS,EAAC,MAFZ;AAGE,mBAASF,QAHX;AAIE,QAAA,OAAO,EAAEG,YAJX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAMGnB,SAAS,CAACgB,QAAD,CAAT,CAAoBI,IANvB,CADF;AAUD,KAdI,CAAP;AAeD,GAlBD;;AAoBA,QAAMD,YAAY,GAAGE,CAAC,IAAI;AACxB,UAAMC,UAAU,GAAGD,CAAC,CAACE,aAAF,CAAgBC,OAAhB,CAAwBC,EAA3C,CADwB,CAExB;;AACA,QAAIhB,gBAAgB,KAAKT,SAAS,CAACsB,UAAD,CAAlC,EAAgD;AAC9CZ,MAAAA,WAAW,CAACY,UAAD,CAAX;AACAlB,MAAAA,YAAY,CAAC,IAAD,CAAZ;AACAH,MAAAA,OAAO,CACJyB,YADH,CACgBJ,UADhB,EAEGK,IAFH,CAEQC,QAAQ,IAAI;AAChBxB,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACAE,QAAAA,UAAU,CAACsB,QAAD,CAAV;AACD,OALH,EAMGC,KANH,CAMSC,KAAK,IAAI;AACd1B,QAAAA,YAAY,CAAC,KAAD,CAAZ;AACAE,QAAAA,UAAU,CAAC;AAAEwB,UAAAA;AAAF,SAAD,CAAV;AACD,OATH;AAUD;AACF,GAjBD;;AAmBA,QAAMC,cAAc,GAAG,MAAM;AAC3BvB,IAAAA,SAAS,CAAC,CAACD,MAAF,CAAT;AACD,GAFD;;AAIA,MAAIyB,aAAa,GAAG,UAApB;;AAEA,MAAIzB,MAAJ,EAAY;AACVyB,IAAAA,aAAa,IAAI,SAAjB;AACD;;AAED,QAAMC,KAAK,GACRjC,SAAS,CAACS,gBAAD,CAAT,IAA+BT,SAAS,CAACS,gBAAD,CAAT,CAA4BW,IAA5D,IACA,iBAFF;AAIA,SACE;AAAK,IAAA,SAAS,EAAEY,aAAhB;AAA+B,IAAA,OAAO,EAAED,cAAxC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,OAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAwBE,KAAxB,CADF,EAEE;AAAI,IAAA,SAAS,EAAC,MAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAsBtB,eAAe,EAArC,CAFF,CADF;AAMD,CAlED","sourcesContent":["import React, { useContext, useState } from \"react\";\n\nimport{ locations }from \"../staticData\";\n\nimport helpers from \"../helpers\";\n\nimport { ResultsContext, LoadingContext } from \"../Store\";\n\nexport default () => {\n  const setIsLoading = useContext(LoadingContext).setState;\n  const setResults = useContext(ResultsContext).setState;\n\n  const [isOpen, setIsOpen] = useState(false);\n  const [selectedLocation, setLocation] = useState();\n\n  const renderLocations = () => {\n    const locationKeys = Object.keys(locations);\n\n    return locationKeys\n      // do not display selected location\n      .filter(location => location !== selectedLocation)\n      .map((location, i) => {\n        return (\n          <li\n            key={i}\n            className=\"item\"\n            data-id={location}\n            onClick={handleSelect}\n          >\n            {locations[location].name}\n          </li>\n        );\n      });\n  };\n\n  const handleSelect = e => {\n    const locationID = e.currentTarget.dataset.id;\n    // run getWaterData if new location is selected\n    if (selectedLocation !== locations[locationID]) {\n      setLocation(locationID);\n      setIsLoading(true);\n      helpers\n        .getWaterData(locationID)\n        .then(response => {\n          setIsLoading(false);\n          setResults(response);\n        })\n        .catch(error => {\n          setIsLoading(false);\n          setResults({ error });\n        });\n    }\n  };\n\n  const toggleDropdown = () => {\n    setIsOpen(!isOpen);\n  };\n\n  let dropdownClass = \"dropdown\";\n\n  if (isOpen) {\n    dropdownClass += \" active\";\n  }\n\n  const title =\n    (locations[selectedLocation] && locations[selectedLocation].name) ||\n    \"Select Location\";\n\n  return (\n    <div className={dropdownClass} onClick={toggleDropdown}>\n      <div className=\"title\">{title}</div>\n      <ul className=\"list\">{renderLocations()}</ul>\n    </div>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}